# ä¸´æ—¶æ–‡ä»¶

# å®˜æ–¹æ‰‹å†Œ - https://manual.nssurge.com/
# ç†è§£åŸç† - https://manual.nssurge.com/book/understanding-surge/cn/
# å¸®åŠ©ä¸­å¿ƒ - https://nssurge.zendesk.com/
# æŠ€æœ¯ç¤¾åŒº - https://community.nssurge.com

# 2024-09-17
# å‚è€ƒ
# 1ã€è€åˆ˜ï¼ˆæœ€ç®€é…ç½®ï¼‰
# https://gist.githubusercontent.com/Zeaphyou/864aebea248ca1bb8000e0e5623b65f3/raw/c36413c715f43f22772d3c2353358e1ff936b2e6/Surge.conf
# 
# 2ã€Lucy
# https://raw.githubusercontent.com/As-Lucky/Lucky/main/Lucky-Surge.conf
# 
# 3ã€æ·±æ¸¯æœ‰çŒ«ï¼ˆæ¯”è¾ƒä¸­æ„çš„ï¼‰
# https://raw.githubusercontent.com/Rabbit-Spec/Surge/Master/Conf/Spec/Surge.conf
# 

[custom]
# Surge çš„ä¸€äº›è¯´æ˜

# Surge 4 4.10.0 (1867) is ready to test on iOS.
è¯¥ç‰ˆæœ¬å®Œå…¨é‡æ„äº†ç­–ç•¥ç»„åŠŸèƒ½ï¼Œå¸¦æ¥äº†ä»¥ä¸‹å˜åŒ–ï¼š
url-test/fallback/load-balance ç­–ç•¥ç»„ä¸å†å¯ä»¥å•ç‹¬é…ç½®æµ‹é€Ÿç”¨ URLï¼Œåªå¯ä»¥ä½¿ç”¨å…¨å±€çš„æµ‹é€Ÿ URL æˆ–è€…ç­–ç•¥é…ç½®çš„æµ‹é€Ÿ URLã€‚
è¯¥ä¿®æ”¹åç­–ç•¥çš„æµ‹é€Ÿç»“æœå¯ç›´æ¥ç”¨äºæ‰€æœ‰ç­–ç•¥ç»„çš„å†³ç­–ä¸­ï¼Œä¸å†éœ€è¦ä¸ºæ¯ä¸ªç­–ç•¥ç»„éƒ½å•ç‹¬é‡æµ‹ã€‚
  
# url-test ç­–ç•¥ç»„
timeout é»˜è®¤ 5s
interval é»˜è®¤ 86400sï¼ˆ24 å°æ—¶ï¼‰
tolerance é»˜è®¤ 100ms
è¡¥å……ï¼šéªŒè¯åï¼Œtimeout\interval\tolerance ä¸º 0ï¼Œå’Œæ²¡æœ‰è®¾ç½®æ˜¯ä¸€æ ·çš„ï¼Œé‡‡ç”¨é»˜è®¤å€¼ã€‚

ä¸€ã€timeout æµ‹è¯•çš„æœ€é•¿ç­‰å¾…æ—¶é—´ï¼Œé»˜è®¤ 5s
è¶…è¿‡è¯¥æ—¶é—´çš„ç­–ç•¥ï¼Œå°†æ ‡è®°ä¸ºå¤±è´¥ä¸å†ç»§ç»­ç­‰å¾…ã€‚
äºŒã€update-interval æ›´æ–°æ—¶é—´ï¼Œé»˜è®¤ 60*60*24=86400 ç§’ï¼ˆ24 å°æ—¶ï¼‰
ä»€ä¹ˆæ—¶å€™è§¦å‘ï¼ŒSurge å®˜æ–¹çš„è§£é‡Šï¼Œå¦‚ä¸‹ã€‚
ï¼ˆ1ï¼‰é¦–æ¬¡ä½¿ç”¨æ—¶è¿›è¡Œæµ‹è¯•ã€‚
ï¼ˆ2ï¼‰åç»­ä½¿ç”¨è¯¥ç­–ç•¥ç»„æ—¶ï¼Œå¦‚æœä¸Šæ¬¡æµ‹è¯•çš„æ—¶é—´é—´éš”å·²å¤§äº interval è®¾ç½®æ—¶é—´ï¼Œåˆ™å†æ¬¡è§¦å‘æµ‹è¯•ã€‚
ï¼ˆ3ï¼‰å½“ç›®å‰é€‰ä¸­ç­–ç•¥äº§ç”Ÿä¸å¯æ¢å¤æ€§é”™è¯¯æ—¶ï¼Œç›´æ¥è§¦å‘æµ‹è¯•ã€‚
ï¼ˆ4ï¼‰ç½‘ç»œåˆ‡æ¢åï¼Œå°†æ¸…ç†ä¹‹å‰çš„æµ‹è¯•ç»“æœï¼Œå½“ç­–ç•¥ç»„è¢«ä½¿ç”¨æ—¶è§¦å‘é¦–æ¬¡æµ‹è¯•ã€‚
ä¸‰ã€tolerance å®¹å¿åº¦ï¼Œé»˜è®¤ 100 ms
1ã€å½“æ–°ä¸€æ¬¡çš„æµ‹è¯•ç»“æœä¸­ï¼Œâ€œæœ€ä½³ç­–ç•¥æ¯”åŸé€‰ä¸­ç­–ç•¥çš„å»¶è¿Ÿå·®å¤§äºå®¹å¿åº¦æ—¶â€ï¼Œæ‰ä¼šåˆ‡æ¢è‡³æ–°çš„ç­–ç•¥ã€‚
2ã€ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œtolerance é»˜è®¤ï¼Œé™¤éå¾ˆçƒ‚çš„æœºåœºï¼Œå¦åˆ™æ°¸è¿œä¸ä¼šè§¦å‘ã€‚
3ã€å¦‚æœ tolerance å¤ªå°ï¼Œé¢‘ç¹åˆ‡æ¢ç­–ç•¥ï¼Œå¯èƒ½ä¼šè§¦å‘ç›®æ ‡ç½‘ç«™çš„é£é™©æ§åˆ¶ã€‚
å››ã€evaluate-before-use é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨é¦–æ¬¡ä½¿ç”¨ç­–ç•¥ç»„æ—¶å°†ç›´æ¥ä½¿ç”¨å­ç­–ç•¥ä¸­çš„ç¬¬ä¸€ä¸ªç­–ç•¥ï¼ŒåŒæ—¶è§¦å‘å»¶è¿Ÿæµ‹è¯•ã€‚
1ã€å¦‚æœé…ç½®äº† evaluate-before-use=trueï¼Œé‚£ä¹ˆé¦–æ¬¡ä½¿ç”¨æ—¶å°†ç­‰å¾…æµ‹è¯•å®Œæ¯•åé€‰æ‹©æœ€ä½³ç­–ç•¥ã€‚
2ã€å†å…·ä½“ç‚¹ï¼Œå°±æ˜¯ï¼šå½“ç­–ç•¥ç»„æµ‹è¯•æœªå®Œæˆæ—¶ï¼Œå°†ä¼šå µå¡ä½å¯¹åº”è¯·æ±‚ï¼Œç­‰å¾…æµ‹è¯•å®Œæ¯•åä½¿ç”¨æµ‹è¯•ç»“æœå†ç»§ç»­ã€‚

äº”ã€smart group è‡ªåŠ¨ä»è¯¥ç­–ç•¥ç»„çš„å­ç­–ç•¥ä¸­é€‰æ‹©åˆé€‚çš„ç­–ç•¥ã€‚
# å®˜æ–¹é“¾æ¥ï¼šhttps://kb.nssurge.com/surge-knowledge-base/v/zh/guidelines/smart-group
1ã€smart æœ€å…³é”®çš„è§£é‡Šï¼š
ï¼ˆ1ï¼‰smart ç­–ç•¥ç»„çš„ç›®æ ‡æ˜¯å–ä»£åŸæœ‰çš„è‡ªåŠ¨æµ‹è¯•ç»„ï¼ˆurl/load-balance/fallbackï¼‰
ï¼ˆ2ï¼‰å¤§å¹…ä¼˜åŒ–ä½“éªŒçš„åŒæ—¶ï¼Œå°½å¯èƒ½å‡å°‘ç”¨æˆ·éœ€è¦æ‰‹åŠ¨å¹²é¢„ç­–ç•¥ç»„çš„æƒ…å†µï¼Œç”¨æˆ·åªéœ€å°†å¯ç”¨ç­–ç•¥æ”¾å…¥è¯¥ç»„å³å¯ã€‚
2ã€æœ¬äººä½¿ç”¨åæ€»ç»“
ï¼ˆ1ï¼‰smart ç”¨è¿‡ä¸€æ®µæ—¶é—´åï¼Œä¼šåˆ†ä¸ºï¼šæœ€å¸¸ä½¿ç”¨ã€ç»å¸¸ä½¿ç”¨ã€å¶å°”ä½¿ç”¨ã€‚
ï¼ˆ2ï¼‰å½“å‰æ­£åœ¨ä½¿ç”¨çš„ç­–ç•¥ï¼ˆæœ€å¸¸ä½¿ç”¨ï¼‰ï¼Œä¸ä¸€å®šæ˜¯å»¶è¿Ÿæœ€ä½ï¼Œå¦‚æœè¿™ä¸ªç­–ç•¥ä¸€ç›´æ‹‰èƒ¯ï¼Œåé¢ä¼šè¢«é™ä¸‹å»ã€‚
ï¼ˆ3ï¼‰smart å’Œ url-test æœ€å¤§çš„åŒºåˆ«
å½“å‰æ­£åœ¨ä½¿ç”¨çš„èŠ‚ç‚¹æ•…éšœæ—¶ï¼Œurl-test ä¼šé‡æ–°æµ‹è¯•é‚£ä¸ªç­–ç•¥ç»„ï¼Œå¯èƒ½ä¼šèŠ±è´¹æ•°åç§’ï¼ŒæœŸé—´çš„è¯·æ±‚ä¼šä¸­æ–­ã€‚
è€Œ smartï¼Œä¼šç›´æ¥ä½¿ç”¨å¤‡é€‰ç­–ç•¥ï¼Œä¹Ÿå°±æ˜¯æ’åé å‰çš„ç­–ç•¥ï¼ŒæœŸé—´çš„è¯·æ±‚ä¸ä¼šä¸­æ–­ï¼Œç”¨æˆ·æ— æ„Ÿã€‚
æ‰€ä»¥ï¼Œæ€»ä½“è€Œè¨€ï¼Œsmart æ¯” url-test è¦æ›´ä¼˜ç§€ã€‚
smart è¿˜ç®—æ¯”è¾ƒ samrtï¼Œæå‡ç©ºé—´å¾ˆå¤§ï¼ŒæœŸå¾…åé¢çš„ä¼˜åŒ–å§ã€‚

  
# å…³äº DEST-PORTï¼ŒSurge å®˜æ–¹æ‰‹å†Œçš„è§£é‡Šï¼Œå¦‚ä¸‹ï¼š
å¢åŠ äº† SRC-PORT è§„åˆ™ç”¨äºåŒ¹é…å®¢æˆ·ç«¯ç«¯å£å·ã€‚
IN-PORT/SRC-PORT/DEST-PORT ä¸‰æ¡è§„åˆ™è¢«å½’ç±»ä¸ºç«¯å£å·è§„åˆ™ç±»å‹ï¼Œæ”¯æŒä¸‰ç§è¡¨è¾¾å¼ï¼š
ç›´æ¥å†™ç«¯å£å·ï¼Œå¦‚ IN-PORT,6153
ç«¯å£å·é—­åŒºé—´ï¼šå¦‚ DEST-PORT,10000-20000
ä½¿ç”¨ >, <, <=, >= æ“ä½œç¬¦ï¼Œå¦‚ SRC-PORT,>=50000
DEST-PORT,123,ğŸ§© å›½å†…ç›´è¿
  
# ----------------------------------------
  
# 2024-09-17
å½“å‰ç‰ˆæœ¬ï¼š5.8.0(2900)
  
DEST-PORT,123,ğŸ§© å›½å†…ç›´è¿
# > å±€åŸŸç½‘åœ°å€
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Lan/Lan.list,DIRECT

# > æœ€åï¼ˆæˆ‘åŸæ¥çš„ï¼‰
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ProxyLite/ProxyLite.list, ğŸš€ï¸ æ³•å¤–ç‹‚å¾’
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/China/China.list, ğŸ§© å›½å†…ç›´è¿
# > æœ€å
# æ–‡ä»¶åŒºåˆ«ï¼ˆ https://github.com/blackmatrix7/ios_rule_script/blob/master/rule/Surge/China/README.md ï¼‰
# China_All.listä¸China_All_No_Resolve.listä¸º Surge 5.21.0(2952) ä»¥ä¸Šç‰ˆæœ¬ä½¿ç”¨ ---- å½“å‰ç‰ˆæœ¬ï¼š5.8.0(2900) | 2024-09-17
# China_Resolve.listä¸China.listçš„åŒºåˆ«ä»…åœ¨äºåè€…IP-CIDR(6)ç±»å‹å¸¦no-resolveã€‚
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Proxy/Proxy_All_No_Resolve.list, ğŸš€ï¸ æ³•å¤–ç‹‚å¾’
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/China/China_All_No_Resolve.list, ğŸ§© å›½å†…ç›´è¿
# > æœ€åï¼ˆç›®å‰å…ˆç”¨è¿™ä¸ªï¼‰
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Proxy/Proxy_Resolve.list, ğŸš€ï¸ æ³•å¤–ç‹‚å¾’
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/China/China_Resolve.list, ğŸ§© å›½å†…ç›´è¿
# LAN åŒ…æ‹¬äº† 'local' åç¼€å’Œç§æœ‰ IP åœ°å€ã€‚æ³¨æ„ï¼šè¿™ä¸ªè§„åˆ™é›†ä¼šè§¦å‘ DNS æŸ¥è¯¢ã€‚
RULE-SET,LAN,ğŸ§© å›½å†…ç›´è¿
# GeoIP China
GEOIP,CN,ğŸ§© å›½å†…ç›´è¿
# å…œåº•è§„åˆ™
FINAL,é»‘ç™½åå•,dns-failed

# å…³äº no-resolveï¼ŒSurge å®˜æ–¹æ‰‹å†Œçš„ï¼Œè§£é‡Šå¦‚ä¸‹ï¼š
æ ¹æ® IP åˆ¤æ–­çš„è§„åˆ™çš„å¯é€‰é¡¹
é€‰é¡¹: no-resolve

GEOIP,US,DIRECT,no-resolve
IP-CIDR,172.16.0.0/12,DIRECT,no-resolve

å½“ GEOIP æˆ–è€… IP-CIDR è§„åˆ™è¢«è§¦å‘ï¼Œ Surge ä¼šå‘é€ä¸€ä¸ªè§£æè¯·æ±‚å»æ£€æŸ¥ä¸»æœºåæ˜¯å¦ä¸ºä¸€ä¸ªåŸŸåã€‚ä½ å¯ä»¥åŠ ä¸Š â€œno-resolveâ€ ä»¥è·³è¿‡è¿™ä¸ªè¿‡ç¨‹ã€‚

è¯·æ³¨æ„: å¦‚æœæœ¬åœ° DNS æœåŠ¡å™¨æ— æ³•è§£ææŸäº›åŸŸåï¼Œè¯·ç¡®ä¿åœ¨è¿™ä¸ªè§„åˆ™å‰æ²¡æœ‰åŸºäº IP çš„è§„åˆ™ä¼šåŒ¹é…åˆ°è¿™ä¸ªåŸŸåã€‚
å¦åˆ™ï¼Œç”±äº DNS è§£æé”™è¯¯ï¼Œ è§„åˆ™æµ‹è¯•å°†å¤±è´¥ã€‚ä½ å¯ä»¥ç”¨â€œno-resolveâ€æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

# ----------------------------------------
# ä¸‹é¢çš„æ˜¯ â€œè¿œç¨‹è®¢é˜…è½¬æ¢â€ ç›¸å…³çš„
  
# å›½æ——
# ğŸ‡¨ğŸ‡³ğŸ‡­ğŸ‡°ğŸ‡¸ğŸ‡¬ğŸ‡¯ğŸ‡µğŸ‡ºğŸ‡¸ğŸ‡²ğŸ‡´
# ğŸ‡·ğŸ‡ºğŸ‡®ğŸ‡ªğŸ‡¬ğŸ‡§ğŸ‡«ğŸ‡·ğŸ‡©ğŸ‡ªğŸ‡³ğŸ‡±ğŸ‡±ğŸ‡ºğŸ‡®ğŸ‡¹ğŸ‡¦ğŸ‡¹ğŸ‡­ğŸ‡ºğŸ‡ªğŸ‡¸ğŸ‡µğŸ‡¹ğŸ‡²ğŸ‡©ğŸ‡ºğŸ‡¦ğŸ‡·ğŸ‡´ğŸ‡¦ğŸ‡±
# ğŸ‡°ğŸ‡µğŸ‡°ğŸ‡·ğŸ‡µğŸ‡­ğŸ‡®ğŸ‡³ğŸ‡»ğŸ‡³ğŸ‡°ğŸ‡­ğŸ‡¹ğŸ‡­ğŸ‡²ğŸ‡¾ğŸ‡®ğŸ‡©ğŸ‡°ğŸ‡¿ğŸ‡µğŸ‡°ğŸ‡®ğŸ‡±ğŸ‡¹ğŸ‡·ğŸ‡¦ğŸ‡ªğŸ‡ªğŸ‡¬
# ğŸ‡¿ğŸ‡¦
# ğŸ‡¨ğŸ‡¦ğŸ‡¨ğŸ‡±ğŸ‡§ğŸ‡·ğŸ‡¦ğŸ‡·ğŸ‡¦ğŸ‡ºğŸ‡³ğŸ‡¿
emoji=(æ¾³é—¨|MO|Macao|Macau),ğŸ‡²ğŸ‡´


# > intervalï¼ˆé—´éš”ï¼‰300ï¼Œæ¯300ç§’æµ‹ä¸€æ¬¡ã€‚
# > timeoutï¼ˆè¶…æ—¶ï¼‰5ï¼ˆé»˜è®¤æ˜¯5ç§’ï¼Œç©ºå°±æ˜¯é»˜è®¤ï¼‰ï¼Œè¶…è¿‡5ç§’æ²¡æœ‰åº”ç­”å°±æ”¾å¼ƒã€‚
# > toleranceï¼ˆå®¹å¿ï¼‰100ï¼Œæ¯”ä¸Šæ¬¡æœ€ä½å»¶è¿Ÿå¿« 100msï¼ˆè¿™é‡Œæ˜¯æ¯«ç§’ï¼‰ï¼Œå°±å¯ç”¨æ–°èŠ‚ç‚¹ã€‚
custom_proxy_group=ğŸ‡­ğŸ‡° HK Auto`url-test`(é¦™æ¸¯|HK|HKG|Hong Kong)`http://www.gstatic.com/generate_204`300,,100
custom_proxy_group=ğŸ‡­ğŸ‡° HK Auto`url-test`(é¦™æ¸¯|HK|HKG|Hong Kong)`http://www.gstatic.com/generate_204`43200,,25
custom_proxy_group=ğŸ‡­ğŸ‡° HK Select`select`(é¦™æ¸¯|HK|HKG|Hong Kong)
custom_proxy_group=ğŸ‡ºğŸ‡² US Select`select`(ç¾å›½|ç¾|æ´›æ‰çŸ¶|åœ£ä½•å¡|è¥¿é›…å›¾|èŠåŠ å“¥|US|United States|America|California)

# åŸæ¥çš„åˆ†ç»„å’Œæ ‡è¯†
custom_proxy_group=ğŸ¤– AiChat`select`[]ğŸ‡ºğŸ‡² US Select`[]ğŸš€ï¸ Proxy`[]DIRECT`.*
custom_proxy_group=ğŸŒ Google`select`[]ğŸš€ï¸ Proxy`[]ğŸš€ï¸ï¸ Manual`[]DIRECT`.*
custom_proxy_group=ğŸ“² Telegram`select`[]ğŸš€ï¸ Proxy`[]ğŸš€ï¸ï¸ Manual`[]DIRECT`.*
custom_proxy_group=ğŸ Apple`select`[]DIRECT`[]ğŸš€ï¸ Proxy`[]ğŸš€ï¸ï¸ Manual
custom_proxy_group=â“‚ï¸ Microsoft`select`[]DIRECT`[]ğŸš€ï¸ Proxy`[]ğŸš€ï¸ï¸ Manual
custom_proxy_group=ğŸ§© TikTok`select`[]ğŸ‡ºğŸ‡² US Select`[]ğŸš€ï¸ Proxy
custom_proxy_group=ğŸ¥ Netflix`select`[]ğŸ‡¸ğŸ‡¬ SG Select`[]ğŸš€ï¸ Proxy
custom_proxy_group=ğŸ¹ Disney`select`[]ğŸ‡¸ğŸ‡¬ SG Select`[]ğŸš€ï¸ Proxy
custom_proxy_group=ğŸƒ Emby`select`[]ğŸ‡¸ğŸ‡¬ SG Select`[]DIRECT
custom_proxy_group=ğŸ“® Abema`select`[]ğŸ‡¯ğŸ‡µ JP Select`[]ğŸš€ï¸ Proxy
custom_proxy_group=ğŸ“º Bilibili`select`[]DIRECT`[]ğŸš€ï¸ Proxy`[]ğŸš€ï¸ï¸ Manual`.*
custom_proxy_group=ğŸƒï¸ PT`select`[]DIRECT`[]ğŸš€ï¸ Proxy`[]ğŸš€ï¸ï¸ Manual
custom_proxy_group=ğŸ•¹ Game`select`[]DIRECT`[]ğŸš€ï¸ Proxy`[]ğŸš€ï¸ï¸ Manual
custom_proxy_group=ğŸ•¹ Game`select`[]ğŸš€ï¸ Proxy`[]DIRECT`(æ¸¸æˆ|Game)
custom_proxy_group=ğŸ‡ºğŸ‡³ International-Media`select`[]ğŸš€ï¸ Proxy`[]ğŸš€ï¸ï¸ Manual`[]DIRECT`.*
custom_proxy_group=ğŸ‡ºğŸ‡³ International-Websites`select`[]ğŸš€ï¸ Proxy`[]ğŸš€ï¸ï¸ Manual`[]DIRECT`.*
custom_proxy_group=ğŸ‡¨ğŸ‡³ China-Websites`select`[]DIRECT`[]ğŸš€ï¸ Proxy`[]ğŸš€ï¸ï¸ Manual
custom_proxy_group=â›”ï¸ BanAD`select`[]REJECT`[]DIRECT
custom_proxy_group=ğŸŸ Final`select`[]ğŸš€ï¸ Proxy`[]ğŸš€ï¸ï¸ Manual`[]DIRECT
custom_proxy_group=ğŸŸ Final escape rules`select`[]ğŸš€ï¸ Proxy`[]ğŸš€ï¸ï¸ Manual`[]DIRECT
custom_proxy_group=ğŸŸ Final out rules`select`[]ğŸš€ï¸ Proxy`[]ğŸš€ï¸ï¸ Manual`[]DIRECT
custom_proxy_group=ğŸŸğŸŸğŸŸ Final ğŸŸğŸŸğŸŸ`select`[]ğŸš€ï¸ Proxy`[]DIRECT
custom_proxy_group=ğŸŸ Final Fishes ğŸŸ`select`[]ğŸš€ï¸ Proxy`[]DIRECT
custom_proxy_group=ğŸŸ Final Fishes ğŸŸ`select`[]ğŸš€ï¸ Proxy`[]DIRECT


# è®¾ç½®åˆ†ç»„æ ‡å¿—ä½
enable_rule_generator=true
overwrite_original_rules=true

