# é…ç½®åç§°: Surge è‡ªç”¨é…ç½®
# é…ç½®ä½œè€…: wmsxwdsh
# é€‚ç”¨ç‰ˆæœ¬ï¼šiOS/macOS é€šç”¨
# æ›´æ–°æ—¶é—´: 2024-09-16

# å®˜æ–¹æ‰‹å†Œ - https://manual.nssurge.com/
# ç†è§£åŸç† - https://manual.nssurge.com/book/understanding-surge/cn/
# å¸®åŠ©ä¸­å¿ƒ - https://nssurge.zendesk.com/
# æŠ€æœ¯ç¤¾åŒº - https://community.nssurge.com

[General]
# > Internet æµ‹è¯• URL
internet-test-url = http://www.apple.com/library/test/success.html
# internet-test-url = http://connect.rom.miui.com/generate_204

# > ä»£ç†æµ‹é€Ÿ URL
proxy-test-url = http://cp.cloudflare.com/generate_204
# proxy-test-url = http://www.gstatic.com/generate_204
# proxy-test-url = https://translate.google.cn/generate_204
# proxy-test-url = http://1.1.1.1

# > æµ‹è¯•è¶…æ—¶ï¼ˆç§’ï¼‰
test-timeout = 2

# > WiFi åŠ©ç†
#ï¼ˆåœ¨ Wi-Fi ç½‘ç»œä¸ä½³æ—¶å°è¯•ä½¿ç”¨æ•°æ®ç½‘ç»œå»ºç«‹è¿æ¥ï¼Œè¯·ä»…å½“ä½¿ç”¨ä¸é™é‡çš„æ•°æ®æµé‡æ—¶å¼€å¯ï¼‰
wifi-assist = false

# > All Hybrid ç½‘ç»œå¹¶å‘
# > å¼€å¯åï¼Œç­‰åŒäºå¯¹æ‰€æœ‰ç­–ç•¥è®¾ç½® hybrid = trueï¼Œæ‰€æœ‰ TCP è¿æ¥åœ¨å»ºç«‹æ—¶å‡ä¼šå¹¶å‘å°è¯•æ•°æ®ç½‘ç»œå’Œ WiFi è¿æ¥ã€‚
# > é™¤æ­¤ä¹‹å¤–ï¼Œæ‰€æœ‰ DNS æŸ¥è¯¢æ“ä½œä¹Ÿéƒ½å°†å¹¶å‘åœ¨æ•°æ®ç½‘ç»œå’Œ WiFi ä¸Šè¿›è¡Œã€‚æ‰€ä»¥è‹¥æƒ³ä½“éªŒè¯¥åŠŸèƒ½ï¼Œè¯·æ‰‹åŠ¨é…ç½®å…¬ç½‘ DNSï¼Œæš‚ä¸æ”¯æŒ DOHã€‚
all-hybrid = false

# UDP ä¼˜å…ˆçº§
udp-priority = false

# > GeoIP æ•°æ®åº“
geoip-maxmind-url = https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb
# geoip-maxmind-url = https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb

# > æ˜¯å¦å¯åŠ¨å®Œæ•´çš„ IPv6 æ”¯æŒ (é»˜è®¤å€¼: false)
#ï¼ˆå¦‚æ— ç‰¹æ®Šéœ€æ±‚ä¸åº”å¼€å¯ IPv6ï¼Œç›®å‰ç½‘ç»œç¯å¢ƒä¸‹ IPv6 åªä¼šå¸¦æ¥é—®é¢˜ã€‚ï¼‰
ipv6 = false
# > Surge VIF IPv6 Stack
# > å…è®¸ IPv6 é€šè¿‡ Surge VIFï¼Œå½“å¸Œæœ› Surge å¤„ç†è¿æ¥åˆ° IPv6 åœ°å€çš„åŸå§‹ TCP è¿æ¥æ—¶éå¸¸æœ‰ç”¨ã€‚
# > å¯é€‰é¡¹ï¼štrueï¼Œfalseï¼Œautoï¼Œalways
ipv6-vif = auto

# > å…è®¸ Wi-Fi è®¿é—® (ä»… iOSï¼Œè‹¥å…è®¸è¿œç¨‹è®¿é—®å°†ã€Œfalseã€æ”¹ä¸ºã€Œtrueã€)
# > Surge ä½œä¸º HTTP/SOCKS5 ä»£ç†æœåŠ¡å™¨å‘ Wi-Fi ç½‘ç»œä¸‹çš„å…¶ä»–è®¾å¤‡æä¾›æœåŠ¡å™¨
allow-wifi-access = false
# > Surge Mac ä¾›å¤–ç½‘è®¿é—®çš„æœåŠ¡ç«¯å£
wifi-access-http-port = 6152
# > SOCKS5 æœåŠ¡ç«¯å£ (é»˜è®¤å€¼: 6153)
wifi-access-socks5-port = 6153

# > Surge iOS ä¾›å¤–ç½‘è®¿é—®çš„æœåŠ¡ç«¯å£
http-listen = 127.0.0.1:6152
# > SOCKS5 æœåŠ¡ç«¯å£ (é»˜è®¤å€¼: 6153)
socks5-listen = 127.0.0.1:6153

# > å…è®¸çƒ­ç‚¹å…±äº«
allow-hotspot-access = false
# > å…¼å®¹æ€§ï¼ˆä»… iOS ç‰ˆå¯ç”¨ï¼‰
compatibility-mode = 0

# > è·³è¿‡æŸä¸ªåŸŸåæˆ–è€… IP æ®µï¼Œè¿™äº›ç›®æ ‡ä¸»æœºå°†ä¸ä¼šç”± Surge Proxy å¤„ç†ã€‚
# > (macOS ç‰ˆæœ¬ä¸­ï¼Œå¦‚æœå¯ç”¨äº† Set as System Proxy, è¿™äº›å€¼ä¼šè¢«å†™å…¥åˆ°ç³»ç»Ÿç½‘ç»œä»£ç†è®¾ç½®.)
skip-proxy = 192.168.0.0/24, 10.0.0.0/8, 172.16.0.0/12, 127.0.0.1, localhost, *.local, seed-sequoia.siri.apple.com, sequoia.siri.apple.com, sequoia.apple.com, passenger.t3go.cn, www.baidu.com, yunbusiness.ccb.com, wxh.wo.cn, gate.lagou.com, www.abchina.com.cn, www.shanbay.com, login-service.mobile-bank.psbc.com, mobile-bank.psbc.com
# > æ’é™¤ç®€å•ä¸»æœºå
exclude-simple-hostnames = true

# > å¼ºåˆ¶ä½¿ç”¨ç‰¹å®šçš„ DNS æœåŠ¡å™¨
#ï¼ˆ119 è…¾è®¯ï¼Œ180 å­—èŠ‚è·³åŠ¨ï¼Œ223 é˜¿é‡Œäº‘ï¼‰
dns-server = 119.29.29.29, 180.184.1.1, 223.5.5.5, system
# > DNS è®¾ç½®
# > ä» /etc/hosts è¯»å– DNS è®°å½•
read-etc-hosts = true

# > é«˜çº§
# > æ—¥å¿—ç­‰çº§: warning, notify, info, verbose (é»˜è®¤å€¼: notify)
loglevel = notify
# > å½“é‡åˆ° REJECT ç­–ç•¥æ—¶è¿”å›é”™è¯¯é¡µ
show-error-page-for-reject = true

# > Always Real IP Hosts
# > å½“ Surge VIF å¤„ç† DNS é—®é¢˜æ—¶ï¼Œæ­¤é€‰é¡¹è¦æ±‚ Surge è¿”å›ä¸€ä¸ªçœŸæ­£çš„ IP åœ°å€ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå‡ IP åœ°å€ã€‚
# > DNS æ•°æ®åŒ…å°†è¢«è½¬å‘åˆ°ä¸Šæ¸¸ DNS æœåŠ¡å™¨ã€‚
always-real-ip = *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.logon.battlenet.com.cn, *.logon.battle.net, stun.l.google.com

# > Hijack DNS
# > é»˜è®¤æƒ…å†µä¸‹ï¼ŒSurge åªè¿”å›å‘é€åˆ° Surge DNS åœ°å€çš„ DNS æŸ¥è¯¢çš„å‡ IP åœ°å€(198.18.0.2)ã€‚
# > æœ‰äº›è®¾å¤‡æˆ–è½¯ä»¶æ€»æ˜¯ä½¿ç”¨ç¡¬ç¼–ç çš„ DNS æœåŠ¡å™¨ã€‚ (ä¾‹å¦‚ Google Speakers æ€»æ˜¯ä½¿ç”¨ 8.8.8.8)ã€‚
# > æ‚¨å¯ä»¥ä½¿ç”¨æ­¤é€‰é¡¹åŠ«æŒæŸ¥è¯¢ï¼Œä»¥è·å¾—ä¸€ä¸ªå‡åœ°å€ã€‚
hijack-dns = *:53

# > VIF Excluded Routes
# > Surge VIF åªèƒ½å¤„ç† TCP å’Œ UDP åè®®ã€‚ä½¿ç”¨æ­¤é€‰é¡¹å¯ä»¥ç»•è¿‡ç‰¹å®šçš„ IP èŒƒå›´ï¼Œå…è®¸æ‰€æœ‰æµé‡é€šè¿‡ã€‚
; tun-excluded-routes = 239.255.255.250/32

# > æ–°å¢å‚æ•° udp-policy-not-supported-behaviour å‚æ•°ç”¨äºæ§åˆ¶å½“ UDP æµé‡è¢«åŒ¹é…åˆ°ä¸€ä¸ªä¸æ”¯æŒ UDP è½¬å‘çš„ç­–ç•¥æ—¶çš„è¡Œä¸º
# > DIRECTï¼šå›é€€åˆ° DIRECT ç­–ç•¥ï¼ˆé»˜è®¤ï¼‰
# > REJECTï¼šå›é€€åˆ° REJECT ç­–ç•¥
udp-policy-not-supported-behaviour = REJECT

# > é»˜è®¤å‘ 8.8.8.8 æŸ¥è¯¢ apple.comï¼Œå¯ä½¿ç”¨ proxy-test-udp å‚æ•°ä¿®æ”¹ï¼Œå¦‚ proxy-test-udp = google.com@1.1.1.1
proxy-test-udp = apple.com@8.8.8.8

# > éšè—çŠ¶æ€æ ä¸Šçš„ VPN å›¾æ ‡
hide-vpn-icon = false

[Proxy]
ğŸ§© å›½å†…ç›´è¿ = direct
# å¹¿å‘Šæ‹¦æˆª = reject

[Proxy Group]
# update-interval æ›´æ–°æ—¶é—´ï¼Œå•ä½ ç§’, é»˜è®¤æ›´æ–°æ—¶é—´ä¸º 24*60*60=86400 ç§’ï¼ˆ24 å°æ—¶ï¼‰

# > ä¸€ä¸ªæœºåœº
æœºåœº1 = select, update-interval=86400, policy-path=, hidden=true
è®¢é˜…é“¾æ¥ = select, include-other-group="æœºåœº1", hidden=true
# > å¤šä¸ªæœºåœº
# æœºåœº1 = select, update-interval=0, policy-path=, hidden=1
# æœºåœº2 = select, update-interval=0, policy-path=, hidden=1
# æœºåœº3 = select, update-interval=0, policy-path=, hidden=1
# è®¢é˜…é“¾æ¥ = select, include-other-group="æœºåœº1,æœºåœº2,æœºåœº3"

; ğŸŒ å†·é—¨èŠ‚ç‚¹ = select, include-other-group=è®¢é˜…é“¾æ¥, update-interval=0, policy-regex-filter=^((?!(æ¸¯|å°|æ—¥æœ¬|æ–°|ç¾|HK|TW|JP|SG|US|ç›´è¿|å¹¿å‘Š|åˆ°æœŸ|æµé‡|å‰©ä½™)).)*$, hidden=false
ğŸŒ å†·é—¨èŠ‚ç‚¹ = select, include-other-group=è®¢é˜…é“¾æ¥, update-interval=0, policy-regex-filter=^(?!.*(è·ç¦»|é‡ç½®|è¿‡æœŸ|åˆ°æœŸ|å‰©ä½™|GB|Traffic|Expire|é¦™æ¸¯|HK|HKG|Hong Kong|å°æ¹¾|TW|TWN|Taiwan|æ—¥æœ¬|JP|JPN|Japan|ç¾å›½|US|USA|United States|æ–°åŠ å¡|ç‹®åŸ|SG|SGP|Singapore)), hidden=false
é¦™æ¸¯èŠ‚ç‚¹ = url-test, include-other-group=è®¢é˜…é“¾æ¥, update-interval=0, policy-regex-filter=(é¦™æ¸¯|HK|HKG|Hong Kong), hidden=false
æ—¥æœ¬èŠ‚ç‚¹ = url-test, include-other-group=è®¢é˜…é“¾æ¥, update-interval=0, policy-regex-filter=(æ—¥æœ¬|JP|JPN|Japan), hidden=false
ç‹®åŸèŠ‚ç‚¹ = url-test, include-other-group=è®¢é˜…é“¾æ¥, update-interval=0, policy-regex-filter=(æ–°åŠ å¡|ç‹®åŸ|SG|SGP|Singapore), hidden=false
ç¾å›½èŠ‚ç‚¹ = url-test, include-other-group=è®¢é˜…é“¾æ¥, update-interval=0, policy-regex-filter=(ç¾å›½|US|USA|United States), hidden=false
å°æ¹¾èŠ‚ç‚¹ = url-test, include-other-group=è®¢é˜…é“¾æ¥, update-interval=0, policy-regex-filter=(å°æ¹¾|TW|TWN|Taiwan), hidden=false

ğŸš€ï¸ æ³•å¤–ç‹‚å¾’ = select, é¦™æ¸¯èŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, ç‹®åŸèŠ‚ç‚¹, ç¾å›½èŠ‚ç‚¹, ğŸŒ å†·é—¨èŠ‚ç‚¹

è‹¹æœæœåŠ¡ = select, ğŸ§© å›½å†…ç›´è¿, ğŸš€ï¸ æ³•å¤–ç‹‚å¾’
å¾®è½¯æœåŠ¡ = select, ğŸ§© å›½å†…ç›´è¿, ğŸš€ï¸ æ³•å¤–ç‹‚å¾’

ç”µæŠ¥ä»£ç† = select, ç‹®åŸèŠ‚ç‚¹, æ—¥æœ¬èŠ‚ç‚¹, ğŸš€ï¸ æ³•å¤–ç‹‚å¾’
å›½é™…åª’ä½“ = select, ç‹®åŸèŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, ğŸš€ï¸ æ³•å¤–ç‹‚å¾’

ç¾å›½ä¸“åœº = select, ç¾å›½èŠ‚ç‚¹, ğŸš€ï¸ æ³•å¤–ç‹‚å¾’
å°æ¹¾ä¸“åœº = select, å°æ¹¾èŠ‚ç‚¹, ğŸš€ï¸ æ³•å¤–ç‹‚å¾’

æ¸¸æˆç©å®¶ = select, ğŸš€ï¸ æ³•å¤–ç‹‚å¾’, ğŸ§© å›½å†…ç›´è¿
é»‘ç™½åå• = select, ğŸš€ï¸ æ³•å¤–ç‹‚å¾’, ğŸ§© å›½å†…ç›´è¿

Means Nothing  = select, ğŸ§© å›½å†…ç›´è¿

[Rule]
DEST-PORT,123,ğŸ§© å›½å†…ç›´è¿
RULE-SET, https://raw.githubusercontent.com/wmsxwdsh/ClashSub/main/myList/AddDirect.list, ğŸ§© å›½å†…ç›´è¿
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list, ğŸ§© å›½å†…ç›´è¿

RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple.list, è‹¹æœæœåŠ¡
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.list, å¾®è½¯æœåŠ¡

RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.list, ç”µæŠ¥ä»£ç†

# å›½é™…åª’ä½“ï¼šNetflixã€DisneyPlus
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Netflix.list, å›½é™…åª’ä½“
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/DisneyPlus.list, å›½é™…åª’ä½“

# ç¾å›½ä¸“åœºï¼šOpenAIã€TikTok
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.list, ç¾å›½ä¸“åœº
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/TikTok.list, ç¾å›½ä¸“åœº

# å°æ¹¾ä¸“åœºï¼šBahamutã€HBOAsiaã€LineTV
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bahamut/Bahamut.list, å°æ¹¾ä¸“åœº
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/HBOAsia/HBOAsia.list, å°æ¹¾ä¸“åœº
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/LineTV/LineTV.list, å°æ¹¾ä¸“åœº

# ğŸš€ï¸ æ³•å¤–ç‹‚å¾’ï¼šYouTubeã€Googleã€Wikipediaã€GitHubã€Shopeeã€ProxyLiteï¼ˆæœ€åï¼‰
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/YouTube.list, ğŸš€ï¸ æ³•å¤–ç‹‚å¾’
RULE-SET, https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Google.list, ğŸš€ï¸ æ³•å¤–ç‹‚å¾’
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Wikipedia/Wikipedia.list, ğŸš€ï¸ æ³•å¤–ç‹‚å¾’
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitHub/GitHub.list, ğŸš€ï¸ æ³•å¤–ç‹‚å¾’
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Shopee/Shopee.list, ğŸš€ï¸ æ³•å¤–ç‹‚å¾’

# æ¸¸æˆç©å®¶ï¼šSteam
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Steam/Steam.list, ğŸš€ï¸ æ³•å¤–ç‹‚å¾’

# æœ€å
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ProxyLite/ProxyLite.list, ğŸš€ï¸ æ³•å¤–ç‹‚å¾’
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/China/China, ğŸ§© å›½å†…ç›´è¿
# RULE-SET,LAN,ğŸ§© å›½å†…ç›´è¿
GEOIP,CN,ğŸ§© å›½å†…ç›´è¿
FINAL,é»‘ç™½åå•,dns-failed


[Host]
mtalk.google.com = 108.177.125.188
dl.google.com = server:119.29.29.29
dl.l.google.com = server:119.29.29.29
update.googleapis.com = server:119.29.29.29
*.dl.playstation.net = server:119.29.29.29

[Header Rewrite]

[URL Rewrite]
^https?:\/\/(www.)?(g|google)\.cn https://www.google.com header

[Script]

[SSID Setting]

[MITM]
skip-server-cert-verify = true
hostname = www.google.cn